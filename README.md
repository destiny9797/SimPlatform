# SimPlatform

---

### 简介

这是一个简单的通信物理层仿真平台，主要有以下两个功能：

- 可以用于测试一些基带处理（编码、调制、滤波等）的性能。用户可以自己定义一些模块，并把它们的收发关系确定好（连接形成拓扑图）。
- 可以自己定制收发端的物理层、MAC层、传输层、应用层，模拟收发节点的通信过程



### 使用方法

给出了两个测试用例：

- 一个简单的BPSK调制解调过程，测试中信噪比和比特数可以自己设置。

```shell
cd SimPlatform
mkdir tmp
mkdir build
cmake ../
make
./test_bpsk
```

- 收发端

``` C++
./test_transmitter
```

``` C++
./test_receiver
```



### 技术栈

- 多线程
- circular buffer
- 





### 更新日志

3.25 基于多线程的通信仿真平台

- One thread per block，一个模块一个线程，并发计算
- 增加了拓扑排序，Source类的模块优先创建线程
- 给出简单测试例子——BPSK的性能测试

4.1 扩展到节点间通信（或可扩展到开发板）

- 将收发节点分为多个进程，利用共享内存进行进程间通信，基础架构
- 增加收发接口Sink和Source，类似于非全双工天线，收和发互斥——后面可扩展到全双工
- 增加中断信号捕获，优雅退出
- 增加线程名字，便于调试
- 给出简单测试例子——transmitter不断发送随机符号，receiver接收

4.27 完整的物理层

- 发送端：BPSK、帧同步码、脉冲成型、上变频
- 接收端：下变频、降采样、位同步、判决解调、帧同步
- 增加了vector的点乘计算优化，对于complex类型的数据效果格外明显，且数据越长效果越明显。

| vector长度 | float 优化前 | float 优化后 | complex<float> 优化前 | complex<float> 优化后 |
| ------------ | ------------ | --------------------- | :-------------------- | ---- |
| 32 | 0.007ms | 0.007ms | 0.011ms | 0.013ms |
| 64 | 0.005ms | 0.005ms | 0.013ms | 0.014ms |
| 128 | 0.005ms | 0.006ms | 0.02ms | 0.015ms |
| 256 | 0.01ms | 0.009ms | 0.027ms | 0.019ms |
| 512 | 0.009ms | 0.009ms | 0.048ms | 0.02ms |
| 1024 | 0.016ms | 0.019ms | 0.091ms | 0.023ms |
| 2048 | 0.027ms | 0.024ms | 0.173ms | 0.032ms |
| 4096 | 0.052ms | 0.038ms | 0.333ms | 0.053ms |
| 8192 | 0.1ms | 0.093ms | 0.661ms | 0.07ms |



待完成：

- 将收发端的共享内存的名字从参数传入 ✅
- Sink和Source反顺序构造的死锁问题 ✅
- 整理和改善类的继承关系
- 构建简易的MAC层及以上协议栈，扩展Task种类
- 帧同步的假同步问题需要解决
- 将共享内存产生的文件在退出时删除